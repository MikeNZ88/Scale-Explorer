<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guitar Scale Explorer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1 class="main-title">Guitar Scale Explorer</h1>

        <!-- Scale Controls -->
        <div class="scale-controls">
            <div class="control-group">
                <label for="key-select">Root Note:</label>
                <select id="key-select">
                    <option value="C">C</option>
                    <option value="Db">Db</option>
                    <option value="D">D</option>
                    <option value="Eb">Eb</option>
                    <option value="E">E</option>
                    <option value="F">F</option>
                    <option value="F#">F#</option>
                    <option value="G">G</option>
                    <option value="Ab">Ab</option>
                    <option value="A">A</option>
                    <option value="Bb">Bb</option>
                    <option value="B">B</option>
                </select>
            </div>

            <div class="control-group">
                <label for="category-select">Scale Type:</label>
                <select id="category-select">
                    <!-- Options will be populated by JavaScript -->
                </select>
            </div>

            <div class="control-group">
                <label for="mode-select">Mode:</label>
                <select id="mode-select">
                    <!-- Options will be populated by JavaScript -->
                </select>
            </div>

            <div class="control-group">
                <label for="color-toggle">
                    <input type="checkbox" id="color-toggle" checked>
                    <span class="color-toggle-container">
                        <span class="color-toggle-label">üé® Colors</span>
                    </span>
                </label>
            </div>
        </div>

        <!-- Scale Display -->
        <div class="scale-card">
            <div class="scale-header">
                <h2 class="scale-title">
                    <span class="parent-scale">C Major</span>
                    <span class="mode-name">Ionian</span>
                </h2>
            </div>

            <!-- Fretboard Display - Moved to top -->
            <div class="fretboard-section">
                <h3>Fretboard Diagram</h3>
                <div class="fretboard-container">
                    <!-- Fretboard will be rendered here -->
                </div>
            </div>

            <!-- Mode Information - Moved below fretboard -->
            <div class="scale-section mode-info" style="display: none;">
                <h3>Mode Information</h3>
                <div class="mode-details">
                    <div class="mode-mood">
                        <strong>Mood:</strong> <span></span>
                    </div>
                    <div class="mode-description">
                        <strong>Description:</strong> <span></span>
                    </div>
                    <div class="mode-applications">
                        <strong>Applications:</strong>
                        <div class="application-tags">
                            <!-- Application tags will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <div class="scale-content">
                <div class="scale-section">
                    <h3>Notes</h3>
                    <div class="notes">
                        <!-- Notes will be populated by JavaScript -->
                    </div>
                </div>

                <div class="scale-section">
                    <h3>Intervals</h3>
                    <div class="intervals">
                        <!-- Intervals will be populated by JavaScript -->
                    </div>
                </div>

                <div class="scale-section">
                    <h3>Formula</h3>
                    <div class="formula">
                        <!-- Formula will be populated by JavaScript -->
                    </div>
                </div>

                <div class="scale-section related-modes">
                    <h4>Related Modes</h4>
                    <div class="mode-buttons">
                        <!-- Mode buttons will be populated by JavaScript -->
                    </div>
                    <div class="parent-scale-info">
                        <!-- Parent scale information will be populated by JavaScript -->
                    </div>
                </div>

                <div class="scale-section chords-section">
                    <h3>Chords diatonic to the scale</h3>
                    <p class="section-description">These are chords that can be built from the scale. They only include notes from the scale</p>
                    <div class="chord-controls">
                        <button class="chord-type-btn active" data-type="triads">Triads</button>
                        <button class="chord-type-btn" data-type="sevenths">7th Chords</button>
                        <button class="chord-type-btn" data-type="ninths">9th Chords</button>
                        <button class="chord-type-btn" data-type="elevenths">11th Chords</button>
                        <button class="chord-type-btn" data-type="thirteenths">13th Chords</button>
                        <button class="voicing-help-btn" onclick="UIComponents.openChordVoicingModal()" title="Guitar Chord Voicing Practices">‚ÑπÔ∏è</button>
                    </div>
                    <div class="chords-container">
                        <div class="chords-list" id="chords-list">
                            <!-- Chords will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Audio Controls will be inserted here by JavaScript -->
    </div>

    <!-- Fretboard Modal -->
    <div class="modal hidden" id="fretboard-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Detailed Fretboard View</h2>
                <button class="close-modal" onclick="UIComponents.closeFretboardModal()">√ó</button>
            </div>
            <div class="modal-fretboard">
                <!-- Modal fretboard content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Chord Fretboard Modal -->
    <div class="modal hidden" id="chord-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="chord-modal-title">Chord Diagram</h3>
                <button class="close-modal" onclick="UIComponents.closeChordModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="chord-info-section">
                    <div class="chord-details">
                        <div class="chord-name-display" id="chord-name-display"></div>
                        <div class="chord-notes-display" id="chord-notes-display"></div>
                        <div class="chord-quality-display" id="chord-quality-display"></div>
                    </div>
                </div>
                <div class="chord-fretboard-container" id="chord-fretboard-container">
                    <!-- Chord fretboard will be rendered here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Chord Voicing Practices Modal -->
    <div class="modal hidden" id="chord-voicing-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Guitar Chord Voicing Practices</h3>
                <button class="close-modal" onclick="UIComponents.closeChordVoicingModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="voicing-content">
                    <div class="voicing-section">
                        <h4>‚ö†Ô∏è Important Note About Chord Diagrams</h4>
                        <p>The chord diagrams show <strong>theoretical full fretboard positions</strong> for educational purposes. Many extended chords (especially 9th, 11th, and 13th chords) contain 5-7 notes and <strong>cannot be physically played</strong> on a 6-string guitar as shown.</p>
                        <p><strong>Note:</strong> This application displays standard tertian harmony chords (triads, 7ths, 9ths, 11ths, 13ths) built from scale degrees. Other chord types (such as 6th chords, sus chords, add chords, slash chords, etc.) are not included in this site.</p>
                    </div>
                    
                    <div class="voicing-section">
                        <h4>üé∏ Practical Guitar Voicing</h4>
                        <p>In practice, guitarists use <strong>note omission</strong> to create playable voicings. Here's the established hierarchy:</p>
                        
                        <div class="omission-hierarchy">
                            <div class="omission-item priority-1">
                                <span class="priority-number">1</span>
                                <div class="omission-details">
                                    <strong>Fifth (5th) - First to Omit</strong>
                                    <p>The fifth is "harmonically inert" and doesn't define major/minor quality. It's implied in the overtones of the root.</p>
                                </div>
                            </div>
                            
                            <div class="omission-item priority-2">
                                <span class="priority-number">2</span>
                                <div class="omission-details">
                                    <strong>Root - Context Dependent</strong>
                                    <p>Can be omitted when playing with a bass player or other harmonic instruments that provide the root.</p>
                                </div>
                            </div>
                            
                            <div class="omission-item priority-3">
                                <span class="priority-number">3</span>
                                <div class="omission-details">
                                    <strong>Extensions (9th, 11th) - Situational</strong>
                                    <p>For 13th chords, the 9th and 11th can be omitted while retaining the characteristic 13th extension.</p>
                                </div>
                            </div>
                            
                            <div class="omission-item essential">
                                <span class="essential-icon">üö´</span>
                                <div class="omission-details">
                                    <strong>Never Omit: Third and Seventh</strong>
                                    <p>The 3rd defines major/minor quality. The 7th determines dominant vs. major 7th character. These are essential for chord identity.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="voicing-section">
                        <h4>üí° Practical Examples</h4>
                        <div class="example-grid">
                            <div class="example-item">
                                <strong>C13 Chord (7 notes)</strong>
                                <div class="theory-notes">Theory: C-E-G-B‚ô≠-D-F-A</div>
                                <div class="practical-notes">Practical: C-E-B‚ô≠-A (omit 5th, 9th, 11th)</div>
                            </div>
                            
                            <div class="example-item">
                                <strong>Shell Voicing</strong>
                                <div class="theory-notes">Essential: 3rd + 7th only</div>
                                <div class="practical-notes">Example: E-B‚ô≠ (for C7)</div>
                            </div>
                            
                            <div class="example-item">
                                <strong>Rootless Voicing</strong>
                                <div class="theory-notes">With bass player: omit root</div>
                                <div class="practical-notes">Example: E-B‚ô≠-D-A (for C13)</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="voicing-section special-case">
                        <h4>‚ö†Ô∏è Special Case: Major 6th Chords</h4>
                        <p>For maj6 chords, you <strong>must include the fifth</strong> to avoid sounding like the relative minor triad. Cmaj6 without the 5th (C-E-A) sounds like Am (A-C-E).</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <!-- Core modules in dependency order -->
    <script src="js/core/constants.js"></script>
    <script src="js/core/music-theory.js"></script>
    <script src="js/core/audio-engine.js"></script>
    <script src="js/ui/components.js"></script>
    <script src="js/ui/audio-controls.js"></script>
    <script src="js/core/app-controller.js"></script>

    <!-- Main app initialization -->
    <script src="app.js"></script>
</body>
</html>