<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guitar Scale Explorer</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/alphatab/1.3.0/alphatab.min.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>Guitar Scale Explorer</h1>
            <p class="subtitle">Master scales through keys, modes, and harmonic relationships</p>
        </header>

        <!-- Scale Library -->
        <div class="scale-library" id="scale-library">
            <!-- Key Selector -->
            <div class="key-selector-section">
                <div class="key-controls">
                    <div class="key-selector-wrapper">
                        <label for="key-selector">Root Note:</label>
                        <select id="key-selector" class="key-selector">
                            <!-- Options will be populated by JavaScript -->
                        </select>
                    </div>
                </div>
                
                <!-- Music Theory Note -->
                <div class="music-theory-note">
                    <small>Keys follow traditional music theory: sharp keys (G, D, A, E, B) use sharps, flat keys (F, Bb, Eb, Ab, Db, Gb) use flats. Enharmonic equivalents like F#/Gb are shown as their most common theoretical spelling.</small>
                </div>
                
                <!-- Parent Scale Display -->
                <div class="parent-scale-section">
                    <div class="parent-scale-title">Parent Scale</div>
                    <div class="parent-scale-display" id="parent-scale-display">C Major</div>
                </div>
            </div>

            <!-- Category Tabs -->
            <div class="category-tabs">
                <button class="category-tab active" data-category="major">Major</button>
                <button class="category-tab" data-category="harmonic">Harmonic Minor</button>
                <button class="category-tab" data-category="melodic">Melodic Minor</button>
                <button class="category-tab" data-category="diminished">Diminished</button>
                <button class="category-tab" data-category="chromatic">Chromatic</button>
                <button class="category-tab" data-category="wholeTone">Whole Tone</button>
                <button class="category-tab" data-category="pentatonic">Pentatonic</button>
                <button class="category-tab" data-category="blues">Blues</button>
            </div>

            <!-- Pentatonic Type Selector (hidden by default) -->
            <div class="pentatonic-controls hidden" id="pentatonic-controls">
                <div class="pentatonic-selector-wrapper">
                    <label for="pentatonic-type-selector">Pentatonic Type:</label>
                    <select id="pentatonic-type-selector" class="pentatonic-type-selector">
                        <option value="major">Major Pentatonic</option>
                        <option value="minor">Minor Pentatonic</option>
                        <option value="egyptian">Egyptian Pentatonic</option>
                    </select>
                </div>
            </div>

            <!-- Scale Grid -->
            <div class="scale-grid" id="scale-grid">
                <div class="mode-grid" id="mode-grid">
                    <!-- Mode cards will be dynamically generated here -->
                </div>
            </div>
        </div>

        <!-- Mode Detail View (hidden by default) -->
        <div class="mode-detail hidden" id="mode-detail">
            <div class="navigation">
                <button class="nav-btn" id="back-to-top">
                    ‚Üë Back to Modes
                </button>
            </div>

            <div class="mode-header">
                <h2 class="mode-title" id="mode-name"></h2>
                <p class="mode-root" id="mode-root"></p>
            </div>

            <div class="mode-content">
                <div class="theory-section">
                    <h3 class="section-title">üìö Theory</h3>
                    <div class="theory-grid" id="theory-grid">
                        <div class="theory-item">
                            <div class="theory-label">Formula:</div>
                            <div class="theory-value" id="mode-formula"></div>
                        </div>
                        <div class="theory-item">
                            <div class="theory-label">Intervals:</div>
                            <div class="theory-value" id="mode-intervals"></div>
                        </div>
                        <div class="theory-item">
                            <div class="theory-label">Notes:</div>
                            <div class="theory-value" id="mode-notes"></div>
                        </div>
                        <div class="theory-item">
                            <div class="theory-label">Mood:</div>
                            <div class="theory-value" id="mode-mood"></div>
                        </div>
                        <div class="theory-item">
                            <div class="theory-label">Description:</div>
                            <div class="theory-value" id="mode-description"></div>
                        </div>
                        <div class="theory-item">
                            <div class="theory-label">Applications:</div>
                            <div class="theory-value">
                                <ul id="mode-applications"></ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="fretboard-section">
                    <h3 class="section-title">üé∏ Fretboard Pattern</h3>
                    <div class="fretboard-container" id="fretboard-container">
                        <!-- Fretboard will be rendered here -->
                    </div>
                </div>
            </div>

            <div class="practice-section">
                <h3 class="section-title">üéµ Practice Tabs</h3>
                <div class="practice-tabs" id="practice-tabs">
                    <!-- Practice tabs will be populated here -->
                </div>
            </div>
        </div>

        <!-- Tab Player (hidden by default) -->
        <div class="tab-player hidden" id="tab-player">
            <div class="player-controls">
                <button class="control-btn" id="play-btn">‚ñ∂</button>
                <button class="control-btn" id="pause-btn">‚è∏</button>
                <button class="control-btn" id="stop-btn">‚èπ</button>
                <button class="control-btn" id="slow-btn">üêå</button>
                <button class="control-btn" id="loop-btn">üîÑ</button>
            </div>

            <div class="tab-content" id="tab-content">
                <!-- Tab notation will be displayed here -->
            </div>
        </div>

        <!-- File Upload Section -->
        <div class="upload-section" id="upload-section">
            <div class="upload-icon">üìÅ</div>
            <h3>Upload Guitar Pro Files</h3>
            <p>Drag and drop your .gp, .gpx, or .gp5 files here</p>
            <input type="file" id="file-input" class="file-input" accept=".gp,.gpx,.gp5,.gp4,.gp3" multiple>
            <button class="upload-btn" onclick="document.getElementById('file-input').click()">
                Choose Files
            </button>
        </div>
    </div>

    <!-- Modal for Scale Details -->
    <div class="modal hidden" id="scale-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Scale Details</h3>
                <button class="close-btn" id="close-modal">√ó</button>
            </div>
            <div class="modal-body" id="modal-body">
                <!-- Modal content will be populated here -->
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@coderline/alphatab@latest/dist/alphaTab.js"></script>
    <script src="fretboard.js"></script>
    <script src="app.js"></script>
</body>
</html>